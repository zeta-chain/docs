Interacting with universal contracts on ZetaChain from Bitcoin happens through
the Bitcoin Gateway, a threshold signature scheme (TSS) address. The private key
to this address is distributed among ZetaChain's validator set using MPC.

The Bitcoin Gateway supports the following operations:

- Deposit: Send BTC to a ZetaChain account or contract.
- Call: Trigger a smart contract on ZetaChain using a BTC transaction.
- Deposit and Call: Deposit BTC and immediately invoke a contract.

There are two ways to interact with the Bitcoin Gateway:

| Method       | Max Payload  | Cost          | Revert Address | Best For                             |
| ------------ | ------------ | ------------- | -------------- | ------------------------------------ |
| Inscriptions | >520 bytes   | Higher (2 tx) | Customizable   | ABI-encoded calls and large payloads |
| OP_RETURN    | \~60 bytes\* | Lower (1 tx)  | Matches sender | Simple deposits and small payloads   |

\* Not counting the required 20 bytes for the universal contract address.

## Inscriptions

Inscriptions offer greater flexibility at the cost of complexity and fees. You
must use commit-and-reveal transactions.

> üí° Use inscriptions when your `onCall` payload exceeds 60 bytes, requires ABI
> encoding, or needs a custom revert address.

### Deposit

- Create an inscription with just the 20-byte recipient address.

üìå **Example:**

- [Commit
  TX](https://mempool.space/signet/tx/eaaabfe041c0784d31a5bb8db3ff255b31ae5bd4a81f918a73e39ab3d4f3cd8c)
- [Reveal
  TX](https://mempool.space/signet/tx/b1934876ab53b211fc1e3168bd0b4e2df6a5d9f3bd1be6c77a88666a7c9e926e)
- [Cross-chain
  TX](https://zetachain-athens.blockpi.network/lcd/v1/public/zeta-chain/crosschain/inboundHashToCctxData/b1934876ab53b211fc1e3168bd0b4e2df6a5d9f3bd1be6c77a88666a7c9e926e)

### Call

- Create an inscription with the 20-byte contract address followed by the call
  payload.

üìå **Example:**

- [Commit
  TX](https://mempool.space/signet/tx/6c92cb80f093176b865c1431770e43c9264074d797acabbfee244f96751aac61)
- [Reveal
  TX](https://mempool.space/signet/tx/cdb52721e9787c94cda196304d9f699cc89d661c9946bac32f7bdfcf17e08eaa)
- [Cross-chain
  TX](https://zetachain-athens.blockpi.network/lcd/v1/public/zeta-chain/crosschain/inboundHashToCctxData/cdb52721e9787c94cda196304d9f699cc89d661c9946bac32f7bdfcf17e08eaa)

### Deposit and Call

- Include both the contract address and the ABI-encoded call data in the
  inscription payload.
- The revealed inscription will trigger `onCall` and transfer the associated BTC
  value.

üìå **Example:**

- [Commit
  TX](https://mempool.space/signet/tx/ec1d9078affd6ce20b0b57a2cdd853b9224a2a9fae9ddf759082d7a944dddab4)
- [Reveal
  TX](https://mempool.space/signet/tx/0a05ed49545204d03db88daf5bfa93cc5e9177075701a4f27a3cb97d898a45)
- [Cross-chain
  TX](https://zetachain-athens.blockpi.network/lcd/v1/public/zeta-chain/crosschain/inboundHashToCctxData/0a05ed49545204d03db88daf5bfa93cc5e9177075701a4f27a3cb97d898a45)

## OP_RETURN

This method involves sending a standard Bitcoin transaction with an `OP_RETURN`
output that encodes the recipient (universal contract or EOA) and an optional
short message.

### Deposit

To deposit BTC into a **ZetaChain account**, construct a Bitcoin transaction
with:

1. **First output**: BTC amount sent to the TSS Bitcoin address.
2. **Second output**: `OP_RETURN PUSH_x [DATA]`, where:

   - `[DATA] = 0x` + 20-byte recipient address on ZetaChain (Ethereum-style).

üìå **Example:**

- [Transaction](testnet](https://blockstream.info/testnet/tx/952d60fd9efc1aad4b87a8a7a6d57a972d49e084de8b5dc524e163216c11c04f)
- [Cross-chain
  TX](https://zetachain-athens.blockpi.network/lcd/v1/public/zeta-chain/crosschain/inboundHashToCctxData/952d60fd9efc1aad4b87a8a7a6d57a972d49e084de8b5dc524e163216c11c04f)

### Call

To call a universal contract on ZetaChain:

- `[DATA] = [contract address (20 bytes)] + [call payload (max 60 bytes)]`

This will execute the `onCall` method on the target contract.

‚ö†Ô∏è Keep payloads concise. Larger data should use inscriptions instead.

### Deposit and Call

Use the same format as a call, but ensure the BTC sent is used as part of the
operation.

## Fees

Unlike EVM chains, **Bitcoin transactions incur UTXO spend fees**. To manage
this:

- ZetaChain charges a **deposit fee** in advance, calculated as:

```text
depositFee = (txFee / txVsize) * 68 * 2
```

Where:

- `txFee = totalInputValue - totalOutputValue`
- `txVsize` is the virtual size of the Bitcoin transaction.
